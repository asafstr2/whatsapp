{"ast":null,"code":"var _jsxFileName = \"C:\\\\web-dev\\\\whatsAppClone\\\\whatsappMern\\\\front\\\\src\\\\App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport SideBar from \"./SideBar\";\nimport Chat from \"./Chat.js\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Pusher from \"pusher-js\";\nimport axios from \"./axios\";\nimport { useParams } from \"react-router-dom\";\nconst useStyles = makeStyles(theme => ({\n  app: {\n    backgroundColor: \"#dadbd3\",\n    height: \"100vh\",\n    width: \"100vw\",\n    display: \"grid\",\n    placeItems: \"center\"\n  },\n  app_body: {\n    display: \"flex\",\n    backgroundColor: \"#ededed\",\n    height: \"95%\",\n    maxHeight: \"750px\",\n    width: \"70%\",\n    boxShadow: \"-1px 4px 20px -6px rgba(0,0,0,0.7)\"\n  },\n  SideBar: {\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\"\n  }\n}));\n\nfunction App() {\n  const {\n    roomId\n  } = useParams();\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    axios.get(\"/rooms/:roomid\").then(res => setMessages(res.data));\n  }, []);\n  useEffect(() => {\n    var pusher = new Pusher(\"899744c36189f508077b\", {\n      cluster: \"ap2\"\n    });\n    const channel = pusher.subscribe(\"chats\");\n    channel.bind(\"inserted\", data => {\n      setMessages([...messages, data]);\n    });\n    return () => {\n      channel.unsubscribe();\n      channel.unbind_all();\n    };\n  }, [messages]);\n  console.log(messages);\n  const classes = useStyles();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.app,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.app_body,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.SideBar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SideBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/rooms/:roomId\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }\n  }, messages.length > 0 && /*#__PURE__*/React.createElement(Chat, {\n    messagesProps: messages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 37\n    }\n  })))))));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/web-dev/whatsAppClone/whatsappMern/front/src/App.js"],"names":["React","useEffect","useState","makeStyles","SideBar","Chat","BrowserRouter","Router","Switch","Route","Pusher","axios","useParams","useStyles","theme","app","backgroundColor","height","width","display","placeItems","app_body","maxHeight","boxShadow","App","roomId","messages","setMessages","get","then","res","data","pusher","cluster","channel","subscribe","bind","unsubscribe","unbind_all","console","log","classes","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport SideBar from \"./SideBar\";\nimport Chat from \"./Chat.js\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Pusher from \"pusher-js\";\nimport axios from \"./axios\";\nimport { useParams } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  app: {\n    backgroundColor: \"#dadbd3\",\n    height: \"100vh\",\n    width: \"100vw\",\n    display: \"grid\",\n    placeItems: \"center\",\n  },\n  app_body: {\n    display: \"flex\",\n    backgroundColor: \"#ededed\",\n    height: \"95%\",\n    maxHeight: \"750px\",\n    width: \"70%\",\n    boxShadow: \"-1px 4px 20px -6px rgba(0,0,0,0.7)\",\n  },\n  SideBar: {\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n  },\n}));\n\nfunction App() {\n  const { roomId } = useParams();\n\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    axios.get(\"/rooms/:roomid\").then((res) => setMessages(res.data));\n  },[]);\n\n  useEffect(() => {\n    var pusher = new Pusher(\"899744c36189f508077b\", {\n      cluster: \"ap2\",\n    });\n    const channel = pusher.subscribe(\"chats\");\n    channel.bind(\"inserted\", (data) => {\n      setMessages([...messages, data]);\n    });\n\n    return () => {\n      channel.unsubscribe();\n      channel.unbind_all();\n    };\n  }, [messages]);\n  console.log(messages)\n  const classes = useStyles();\n\n  return (\n    <div className={classes.app}>\n      <div className={classes.app_body}>\n        <div className={classes.SideBar}>\n          <Router>\n            <SideBar />\n            <Switch>\n              <Route path=\"/rooms/:roomId\">\n              {messages.length>0&&  <Chat messagesProps={messages}/>}\n              </Route>\n            </Switch>\n          </Router>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}